#Makefile

BUILD_NAME	=	api_leap

BUILD_PATH 	=	./build/lib

NAME 	= 	$(BUILD_PATH)/$(BUILD_NAME)

SRC		= 	main.cpp\
			classes/controller.cpp\

OBJ		=   $(SRC:.cpp=.o)

CXX		=	clang++

LDFLAGS	+=	-lm -lsfml-graphics -lsfml-audio -lsfml-system -lsfml-window -L /usr/local/lib

CXXFLAGS	+=	-Wall -ggdb3 -I ./include -std=c++11

$(NAME)		:	$(OBJ)
				$(CXX) $^ -o $@ $(LDFLAGS)

clean		:
				rm -vf $(OBJ) 

fclean		:	clean
				rm -vf $(NAME)

re			:	fclean all

.PHONY		:	clean fclean re

#clang++ -Wall -shared -fPIC -o libtest.so -I include/ classes/controller.cpp 

#Makefile

BUILD_NAME	=	libapileap.so

BUILD_PATH 	=	./build

NAME 	= 	$(BUILD_PATH)/$(BUILD_NAME)

SRC		= 	classes/controller.cpp\

OBJ		=   $(SRC:.cpp=.o)

CXX		=	g++

LDFLAGS	+=	-lm -lsfml-graphics -lsfml-audio -lsfml-system -lsfml-window -L /usr/local/lib

CXXFLAGS	+=	-Wall -ggdb3 -I ./include -std=c++11 -fPIC

$(NAME)		:	$(OBJ)
				$(CXX) $(CXXFLAGS) -c $(SRC) -o $(OBJ) $(LDFLAGS)
				$(CXX) -shared -o $(NAME) $(OBJ)

clean		:
				rm -vf $(OBJ) 

fclean		:	clean
				rm -vf $(NAME)

re			:	fclean all

.PHONY		:	clean fclean re

#g++ -I ./inc -fpic -c src/AddNumbers.cpp -o obj/AddNumbers.o
#g++ -shared -o lib/libAddNumbers.so obj/AddNumbers.o


CC = clang++

ifeq ($(DEBUG),yes)
	CXXFLAGS = -Wall -g
	LDFLAGS = -Wall -g -lm -lsfml-graphics -lsfml-audio -lsfml-system -lsfml-window -L /usr/local/lib
else
	CXXFLAGS = -Wall
	LDFLAGS = -Wall -lm -lsfml-graphics -lsfml-audio -lsfml-system -lsfml-window -L /usr/local/lib
endif

INCPATH = include
SRCPATH = source
OBJPATH = obj
LIBPATH = lib
BINPATH = bin


SRCFILE = controller.cpp\
			
INC = $(INCPATH)

SRC = $(SRCPATH)/controller.cpp\
		$(SRCPATH)/UIObject.cpp\

OBJ = $(OBJPATH)/$(SRC:.cpp=.o)

OUT = $(LIBPATH)/libapileap.so

INCLUDES = -I ./$(INCPATH)

default: $(OUT)

$(OUT): $(OBJ)
	$(CC) $(LDFLAGS) -shared -o $@ $^

$(OBJPATH)/%.o: $(SRCPATH)/%.cpp 
	$(CC) $(CXXFLAGS) $(INCLUDES) -fpic -c $< -o $@

.PHONY: clean cleanall

clean:
	rm -f $(OBJPATH)/*.o

fclean: clean
	rm -f $(OUT)

re : fclean default